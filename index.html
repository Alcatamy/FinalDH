<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final División de Honor - Calculadora Detallada</title>
    <!-- Font Awesome para iconos si los necesitas, aunque no se usan en esta lógica -->
    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"> -->
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: auto;
        }
        h1, h2, h3 {
            color: #0056b3; /* Azul oscuro para títulos */
            text-align: center;
            margin-bottom: 20px;
        }
        .team-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .team-title {
            font-weight: bold;
            color: #007bff; /* Azul más claro para nombres de equipo */
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="number"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Para que padding no afecte el width total */
        }
        .partido-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }
        .column {
            padding: 10px;
        }
        .totals, .champion-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 5px;
            text-align: center;
        }
        .champion-info {
            font-weight: bold;
            font-size: 1.2em;
            color: green;
            border: 2px solid green;
        }
        .hidden {
            display: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        #partidos_restantes_vuelta_container {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff8e1; /* Amarillo claro */
            border: 1px solid #ffe082; /* Amarillo más oscuro */
            border-radius: 5px;
        }
        #partidos_restantes_vuelta_container label {
            color: #bf360c; /* Naranja oscuro */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Final División de Honor - Calculadora Detallada</h1>

        <div class="team-section">
            <h3 class="team-title">IES La Orden</h3>
            <h4>Partido de Ida</h4>
            <div class="partido-info">
                <div class="column">
                    <label for="partidos_ida_equipo1">Partidos Ganados (Ida):</label>
                    <input type="number" id="partidos_ida_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="sets_ida_equipo1">Sets Ganados (Ida):</label>
                    <input type="number" id="sets_ida_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="puntos_ida_equipo1">Puntos Ganados (Ida):</label>
                    <input type="number" id="puntos_ida_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
            </div>
            <h4>Partido de Vuelta (Parcial)</h4>
            <div class="partido-info">
                <div class="column">
                    <label for="partidos_vuelta_equipo1">Partidos Ganados (Vuelta Parcial):</label>
                    <input type="number" id="partidos_vuelta_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="sets_vuelta_equipo1">Sets Ganados (Vuelta Parcial):</label>
                    <input type="number" id="sets_vuelta_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="puntos_vuelta_equipo1">Puntos Ganados (Vuelta Parcial):</label>
                    <input type="number" id="puntos_vuelta_equipo1" value="0" min="0" oninput="calculateAndCheck()">
                </div>
            </div>
        </div>

        <div class="team-section">
            <h3 class="team-title">Puertas Padilla Cartagena</h3>
            <h4>Partido de Ida</h4>
            <div class="partido-info">
                <div class="column">
                    <label for="partidos_ida_equipo2">Partidos Ganados (Ida):</label>
                    <input type="number" id="partidos_ida_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="sets_ida_equipo2">Sets Ganados (Ida):</label>
                    <input type="number" id="sets_ida_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="puntos_ida_equipo2">Puntos Ganados (Ida):</label>
                    <input type="number" id="puntos_ida_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
            </div>
            <h4>Partido de Vuelta (Parcial)</h4>
            <div class="partido-info">
                <div class="column">
                    <label for="partidos_vuelta_equipo2">Partidos Ganados (Vuelta Parcial):</label>
                    <input type="number" id="partidos_vuelta_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="sets_vuelta_equipo2">Sets Ganados (Vuelta Parcial):</label>
                    <input type="number" id="sets_vuelta_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
                <div class="column">
                    <label for="puntos_vuelta_equipo2">Puntos Ganados (Vuelta Parcial):</label>
                    <input type="number" id="puntos_vuelta_equipo2" value="0" min="0" oninput="calculateAndCheck()">
                </div>
            </div>
        </div>
        
        <div id="partidos_restantes_vuelta_container">
            <label for="partidos_restantes_vuelta">Partidos Restantes en la Vuelta:</label>
            <input type="number" id="partidos_restantes_vuelta" value="7" min="0" max="7" oninput="calculateAndCheck()"> 
            <!-- Asumo un máximo de 7 partidos por encuentro (ida o vuelta) -->
        </div>

        <div class="totals">
            <h2>Totales Acumulados</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>IES La Orden</th>
                        <th>Puertas Padilla Cartagena</th>
                        <th>Diferencia (LO - CA)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Partidos Ganados</td>
                        <td id="total_partidos_equipo1">0</td>
                        <td id="total_partidos_equipo2">0</td>
                        <td id="diff_partidos">0</td>
                    </tr>
                    <tr>
                        <td>Sets Ganados</td>
                        <td id="total_sets_equipo1">0</td>
                        <td id="total_sets_equipo2">0</td>
                        <td id="diff_sets">0</td>
                    </tr>
                    <tr>
                        <td>Puntos Ganados</td>
                        <td id="total_puntos_equipo1">0</td>
                        <td id="total_puntos_equipo2">0</td>
                        <td id="diff_puntos">0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="campeonMatematico" class="champion-info hidden">
            <!-- El mensaje de campeón aparecerá aquí -->
        </div>
    </div>

    <script>
        // CONSTANTES CONFIGURABLES
        const SETS_POR_PARTIDO = 3; // Importante: ajusta si cada partido puede tener un número diferente de sets (ej. 2 o 3). 
                                   // Para "campeón matemático", se usa el valor que maximiza los sets del equipo que va por detrás.
                                   // Si son 3 sets por partido siempre (independiente del resultado 2-0 o 2-1), este valor es 3.
                                   // Si un partido es "al mejor de 3", y un equipo gana 2-0, puede contar como 2 sets ganados para el equipo
                                   // y 0 para el perdedor, o 2 para el ganador y -2 para el perdedor en un "set average".
                                   // Para este problema, asumimos que si un equipo gana un partido, gana como máximo SETS_POR_PARTIDO.
                                   // El ejemplo (4 partidos restantes, 12 sets max) sugiere que cada partido aporta 3 sets al ganador (o se juegan 3).

        const NOMBRE_EQUIPO1 = "IES La Orden";
        const NOMBRE_EQUIPO2 = "Puertas Padilla Cartagena";

        function getIntValue(id) {
            const value = parseInt(document.getElementById(id).value);
            return isNaN(value) ? 0 : value;
        }

        function calculateTotals() {
            const p_ida_e1 = getIntValue('partidos_ida_equipo1');
            const s_ida_e1 = getIntValue('sets_ida_equipo1');
            const pt_ida_e1 = getIntValue('puntos_ida_equipo1');
            const p_vuelta_e1 = getIntValue('partidos_vuelta_equipo1');
            const s_vuelta_e1 = getIntValue('sets_vuelta_equipo1');
            const pt_vuelta_e1 = getIntValue('puntos_vuelta_equipo1');

            const p_ida_e2 = getIntValue('partidos_ida_equipo2');
            const s_ida_e2 = getIntValue('sets_ida_equipo2');
            const pt_ida_e2 = getIntValue('puntos_ida_equipo2');
            const p_vuelta_e2 = getIntValue('partidos_vuelta_equipo2');
            const s_vuelta_e2 = getIntValue('sets_vuelta_equipo2');
            const pt_vuelta_e2 = getIntValue('puntos_vuelta_equipo2');

            const total_p_e1 = p_ida_e1 + p_vuelta_e1;
            const total_s_e1 = s_ida_e1 + s_vuelta_e1;
            const total_pt_e1 = pt_ida_e1 + pt_vuelta_e1;

            const total_p_e2 = p_ida_e2 + p_vuelta_e2;
            const total_s_e2 = s_ida_e2 + s_vuelta_e2;
            const total_pt_e2 = pt_ida_e2 + pt_vuelta_e2;

            document.getElementById('total_partidos_equipo1').textContent = total_p_e1;
            document.getElementById('total_sets_equipo1').textContent = total_s_e1;
            document.getElementById('total_puntos_equipo1').textContent = total_pt_e1;

            document.getElementById('total_partidos_equipo2').textContent = total_p_e2;
            document.getElementById('total_sets_equipo2').textContent = total_s_e2;
            document.getElementById('total_puntos_equipo2').textContent = total_pt_e2;

            document.getElementById('diff_partidos').textContent = total_p_e1 - total_p_e2;
            document.getElementById('diff_sets').textContent = total_s_e1 - total_s_e2;
            document.getElementById('diff_puntos').textContent = total_pt_e1 - total_pt_e2;
            
            return {
                p1: total_p_e1, s1: total_s_e1, pt1: total_pt_e1,
                p2: total_p_e2, s2: total_s_e2, pt2: total_pt_e2
            };
        }

        function checkMathematicalChampion() {
            const totals = calculateTotals();
            const partidos_restantes = getIntValue('partidos_restantes_vuelta');
            
            let campeon = null;

            // Criterio 1: Partidos
            // ¿Puede el Equipo 1 ganar por partidos?
            // Si los partidos actuales de E1 son más que los que E2 podría tener ganando TODOS los restantes
            if (totals.p1 > totals.p2 + partidos_restantes) {
                campeon = NOMBRE_EQUIPO1;
            } 
            // ¿Puede el Equipo 2 ganar por partidos?
            // Si los partidos actuales de E2 son más que los que E1 podría tener ganando TODOS los restantes
            // (Nota: E1 no puede "ganar" partidos restantes si ya se han jugado, esta lógica asume que los partidos_restantes son para ambos)
            // La lógica correcta es: P1_actual vs (P2_actual + R) y P2_actual vs (P1_actual + R)
            // Pero si E1 ya tiene P1 y E2 ya tiene P2, los partidos restantes son los que faltan para completar el TOTAL de la vuelta.
            // E1 no suma partidos_restantes a su total actual, solo E2 puede sumar de esos.
            // Corrección: Cada equipo puede ganar una porción de los partidos restantes.
            // P1 > P2_actual + partidos_restantes_totales (Si E1 gana, y E2 gana todos los restantes, E1 sigue arriba)
            // P2 > P1_actual + partidos_restantes_totales

            else if (totals.p2 > totals.p1 + partidos_restantes) {
                campeon = NOMBRE_EQUIPO2;
            } else {
                // Si no hay campeón por partidos directos (es decir, el resultado de partidos aún está en juego o puede ser empate)
                // Criterio 2: Sets
                // Máximo de sets que el equipo 2 podría obtener si gana todos los partidos restantes 3-0 (o el máximo de sets posible)
                let max_sets_posibles_equipo2 = totals.s2 + (partidos_restantes * SETS_POR_PARTIDO);
                // Máximo de sets que el equipo 1 podría obtener si gana todos los partidos restantes 3-0
                let max_sets_posibles_equipo1 = totals.s1 + (partidos_restantes * SETS_POR_PARTIDO);

                if (totals.s1 > max_sets_posibles_equipo2) {
                    // Aunque E2 gane todos los partidos restantes y sus sets, no alcanzaría los sets de E1
                    campeon = NOMBRE_EQUIPO1;
                } else if (totals.s2 > max_sets_posibles_equipo1) {
                    // Aunque E1 gane todos los partidos restantes y sus sets, no alcanzaría los sets de E2
                    campeon = NOMBRE_EQUIPO2;
                }
                // Si no, no hay campeón matemático por sets todavía.
                // Podríamos añadir lógica de puntos aquí, pero es más complejo para "matemático"
                // ya que la cantidad de puntos por set puede variar mucho.
                // Generalmente, el campeón por puntos se decide al final si todo lo demás está empatado.
            }

            const campeonDiv = document.getElementById('campeonMatematico');
            if (campeon) {
                campeonDiv.textContent = `¡CAMPEÓN MATEMÁTICO: ${campeon}!`;
                campeonDiv.classList.remove('hidden');
            } else {
                campeonDiv.textContent = '';
                campeonDiv.classList.add('hidden');
            }
        }
        
        function calculateAndCheck() {
            calculateTotals(); // Actualiza la tabla de totales
            checkMathematicalChampion(); // Verifica si hay un campeón matemático
        }

        // Inicializar con los valores de tu ejemplo:
        function setInitialExampleValues() {
            // Situación Actual General (Ida + Vuelta Parcial):
            // IES La Orden: 7 partidos, 25 sets, 358 puntos
            // Puertas Padilla Cartagena: 3 partidos, 12 sets, 309 puntos
            // Partidos restantes en la vuelta: 4

            // Asumiremos que la ida terminó, por ejemplo, LO 4-3 CA (en partidos)
            // y la vuelta va LO 3-0 CA (en partidos)
            
            // Para simplificar, podemos poner todo en la "vuelta parcial" y dejar ida en 0,
            // o distribuir. Lo importante son los totales acumulados.
            // Ejemplo:
            // IES La Orden: Ida (0,0,0), Vuelta (7 partidos, 25 sets, 358 puntos)
            // Cartagena: Ida (0,0,0), Vuelta (3 partidos, 12 sets, 309 puntos)
            
            document.getElementById('partidos_ida_equipo1').value = 0; // Asumimos que la info es acumulada en "vuelta"
            document.getElementById('sets_ida_equipo1').value = 0;
            document.getElementById('puntos_ida_equipo1').value = 0;
            document.getElementById('partidos_vuelta_equipo1').value = 7;
            document.getElementById('sets_vuelta_equipo1').value = 25;
            document.getElementById('puntos_vuelta_equipo1').value = 358;

            document.getElementById('partidos_ida_equipo2').value = 0;
            document.getElementById('sets_ida_equipo2').value = 0;
            document.getElementById('puntos_ida_equipo2').value = 0;
            document.getElementById('partidos_vuelta_equipo2').value = 3;
            document.getElementById('sets_vuelta_equipo2').value = 12;
            document.getElementById('puntos_vuelta_equipo2').value = 309;
            
            document.getElementById('partidos_restantes_vuelta').value = 4;

            calculateAndCheck(); // Calcular y verificar con estos valores
        }

        // Llamar a la función para establecer los valores del ejemplo al cargar la página
        window.onload = function() {
            setInitialExampleValues();
        };

    </script>
</body>
</html>
