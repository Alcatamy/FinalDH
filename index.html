<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final División de Honor 2025</title>
    <style>
        /* CSS integrado para evitar problemas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .shuttlecock {
            font-size: 4rem;
            margin-bottom: 2rem;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            margin: 2rem auto;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background: #ffd700;
            width: 100%;
            animation: loadProgress 3s ease-in-out;
        }

        @keyframes loadProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        /* Main Content */
        .main-content {
            display: none;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .logo {
            height: 60px;
            margin-bottom: 1rem;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .teams-section {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .team {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .team img {
            height: 80px;
            margin-bottom: 1rem;
        }

        .team h3 {
            margin-bottom: 1rem;
            color: #333;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .stat {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .vs-section {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .global-score {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .matches-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .match-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .match-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
            color: #333;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }

        .set-input {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .set-input label {
            font-weight: bold;
            min-width: 50px;
        }

        .set-input input {
            flex: 1;
            padding: 0.5rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 1rem;
        }

        .set-input input:focus {
            outline: none;
            border-color: #667eea;
        }

        .match-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-ppc {
            background: #ffebee;
            color: #c62828;
        }

        .result-ies {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .champion-banner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .champion-content {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .trophy {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .champion-content h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #333;
        }

        @media (max-width: 768px) {
            .teams-section {
                grid-template-columns: 1fr;
            }
            
            .matches-container {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="shuttlecock">🏸</div>
            <h2>Cargando Final División de Honor 2025</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p id="loading-text">Inicializando calculadora...</p>
        </div>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="main-content">
        <!-- Header -->
        <div class="header">
            <img src="https://liga.badminton.es/wp-content/uploads/2022/09/LOGO-FESBA.png" alt="FESBA" class="logo" onerror="this.style.display='none'">
            <h1 class="title">FINAL DIVISIÓN DE HONOR 2025</h1>
            <p><strong>Partido de Vuelta:</strong> Sábado, 24 de Mayo de 2025 - 10:00h</p>
            <p><strong>Lugar:</strong> Pabellón Wssell de Guimbarda, Cartagena</p>
            <p style="margin-top: 1rem; padding: 1rem; background: #e3f2fd; border-radius: 8px;">
                <strong>Resultado IDA:</strong> IES La Orden 1-0 Cartagena (4-3 partidos, 14-10 sets, 225-200 puntos)
            </p>
        </div>

        <!-- Teams Section -->
        <div class="teams-section">
            <div class="team">
                <img src="https://liga.badminton.es/wp-content/uploads/2022/12/Logo-Puertas-Padilla-Cartagena.png" alt="PPC" onerror="this.style.display='none'">
                <h3>Puertas Padilla Cartagena</h3>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="ppc-encuentros">0</div>
                        <div class="stat-label">Encuentros</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ppc-partidos">3</div>
                        <div class="stat-label">Partidos</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ppc-sets">10</div>
                        <div class="stat-label">Sets</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ppc-puntos">200</div>
                        <div class="stat-label">Puntos</div>
                    </div>
                </div>
            </div>

            <div class="vs-section">
                <div class="global-score">
                    <div class="score-display" id="global-score">0 - 1</div>
                    <div>Encuentros Globales</div>
                </div>
            </div>

            <div class="team">
                <img src="https://liga.badminton.es/wp-content/uploads/2022/09/IES-La-Orden.png" alt="IES" onerror="this.style.display='none'">
                <h3>Recreativo IES La Orden</h3>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="ies-encuentros">1</div>
                        <div class="stat-label">Encuentros</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ies-partidos">4</div>
                        <div class="stat-label">Partidos</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ies-sets">14</div>
                        <div class="stat-label">Sets</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="ies-puntos">225</div>
                        <div class="stat-label">Puntos</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Matches Container -->
        <div class="matches-container">
            <div class="match-card" data-match="DX">
                <div class="match-title">🏸 Dobles Mixtos (DX)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="DF">
                <div class="match-title">👭 Dobles Femenino (DF)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="DM">
                <div class="match-title">👬 Dobles Masculino (DM)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="IF2">
                <div class="match-title">👩 Individual Femenino 2 (IF2)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="IM2">
                <div class="match-title">👨 Individual Masculino 2 (IM2)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="IF1">
                <div class="match-title">⭐ Individual Femenino 1 (IF1)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>

            <div class="match-card" data-match="IM1">
                <div class="match-title">👑 Individual Masculino 1 (IM1)</div>
                <div class="sets-container">
                    <div class="set-input" data-set="1">
                        <label>Set 1:</label>
                        <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                        <span>-</span>
                        <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                    </div>
                </div>
                <div class="match-result"></div>
            </div>
        </div>

        <!-- Scenarios -->
        <div style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
            <details style="background: rgba(255, 255, 255, 0.9); border-radius: 10px; padding: 1rem;">
                <summary style="font-weight: bold; cursor: pointer; padding: 0.5rem;">📊 Análisis de Escenarios</summary>
                <div id="scenarios" style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                    <p>Introduce resultados para ver qué necesita cada equipo para ser campeón.</p>
                </div>
            </details>
        </div>
    </div>

    <!-- Champion Banner -->
    <div id="champion-banner" class="champion-banner" style="display: none;">
        <div class="champion-content">
            <div class="trophy">🏆</div>
            <h2 id="champion-text"></h2>
            <p>¡CAMPEÓN DIVISIÓN DE HONOR 2025!</p>
        </div>
    </div>

    <script>
        // JavaScript ultra simplificado y funcional
        console.log('🏸 Iniciando calculadora...');

        // Configuración inicial
        const matches = {
            DX: { sets: [], winner: null },
            DF: { sets: [], winner: null },
            DM: { sets: [], winner: null },
            IF2: { sets: [], winner: null },
            IM2: { sets: [], winner: null },
            IF1: { sets: [], winner: null },
            IM1: { sets: [], winner: null }
        };

        const globalStats = {
            ppc: { encuentros: 0, partidos: 3, sets: 10, puntos: 200 },
            ies: { encuentros: 1, partidos: 4, sets: 14, puntos: 225 }
        };

        let champion = null;

        // Función para ocultar loading y mostrar contenido
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            const mainContent = document.getElementById('main-content');
            
            if (loadingScreen && mainContent) {
                loadingScreen.style.display = 'none';
                mainContent.style.display = 'block';
                console.log('✅ Pantalla de carga ocultada');
            }
        }

        // Función para validar set
        function isValidSet(ppcScore, iesScore) {
            if (ppcScore === 0 && iesScore === 0) return false;
            if (ppcScore === 11 && iesScore === 11) return false;
            if (ppcScore === 11) return iesScore < 11;
            if (iesScore === 11) return ppcScore < 11;
            return false;
        }

        // Función para procesar datos de matches
        function processMatchData() {
            Object.keys(matches).forEach(matchKey => {
                const matchCard = document.querySelector(`[data-match="${matchKey}"]`);
                if (!matchCard) return;

                const setInputs = matchCard.querySelectorAll('.set-input');
                let ppcSets = 0;
                let iesSets = 0;
                const sets = [];

                setInputs.forEach((setInput, index) => {
                    const ppcScore = parseInt(setInput.querySelector('.ppc-score').value) || 0;
                    const iesScore = parseInt(setInput.querySelector('.ies-score').value) || 0;

                    if (ppcScore > 0 || iesScore > 0) {
                        sets.push({ ppc: ppcScore, ies: iesScore });

                        if (isValidSet(ppcScore, iesScore)) {
                            if (ppcScore > iesScore) ppcSets++;
                            else if (iesScore > ppcScore) iesSets++;

                            // Mostrar siguiente set si el partido no ha terminado
                            if (ppcSets < 3 && iesSets < 3 && index < 4) {
                                showNextSet(matchCard, index + 2);
                            }
                        }
                    }
                });

                matches[matchKey].sets = sets;

                // Determinar ganador
                if (ppcSets === 3) {
                    matches[matchKey].winner = 'ppc';
                } else if (iesSets === 3) {
                    matches[matchKey].winner = 'ies';
                } else {
                    matches[matchKey].winner = null;
                }

                updateMatchResult(matchCard, ppcSets, iesSets, matches[matchKey].winner);
            });

            updateDisplay();
            checkForChampion();
        }

        // Función para mostrar siguiente set
        function showNextSet(matchCard, setNumber) {
            if (setNumber > 5) return;

            let nextSetInput = matchCard.querySelector(`[data-set="${setNumber}"]`);
            if (!nextSetInput) {
                nextSetInput = document.createElement('div');
                nextSetInput.className = 'set-input';
                nextSetInput.setAttribute('data-set', setNumber);
                nextSetInput.innerHTML = `
                    <label>Set ${setNumber}:</label>
                    <input type="number" class="ppc-score" min="0" max="30" placeholder="PPC">
                    <span>-</span>
                    <input type="number" class="ies-score" min="0" max="30" placeholder="IES">
                `;

                // Añadir event listeners
                nextSetInput.querySelectorAll('input').forEach(input => {
                    input.addEventListener('input', handleScoreInput);
                    input.addEventListener('blur', handleAutoComplete);
                });

                matchCard.querySelector('.sets-container').appendChild(nextSetInput);
            }
        }

        // Función para actualizar resultado del match
        function updateMatchResult(matchCard, ppcSets, iesSets, winner) {
            const resultDiv = matchCard.querySelector('.match-result');
            if (!resultDiv) return;

            if (winner === 'ppc') {
                resultDiv.textContent = `Ganador: PPC (${ppcSets}-${iesSets})`;
                resultDiv.className = 'match-result result-ppc';
            } else if (winner === 'ies') {
                resultDiv.textContent = `Ganador: IES (${ppcSets}-${iesSets})`;
                resultDiv.className = 'match-result result-ies';
            } else if (ppcSets > 0 || iesSets > 0) {
                resultDiv.textContent = `En juego: ${ppcSets}-${iesSets}`;
                resultDiv.className = 'match-result';
            } else {
                resultDiv.textContent = '';
                resultDiv.className = 'match-result';
            }
        }

        // Función para calcular totales
        function calculateTotals() {
            let ppcMatches = 0;
            let iesMatches = 0;
            let ppcSetsTotal = globalStats.ppc.sets;
            let iesSetsTotal = globalStats.ies.sets;
            let ppcPointsTotal = globalStats.ppc.puntos;
            let iesPointsTotal = globalStats.ies.puntos;

            Object.values(matches).forEach(match => {
                if (match.winner === 'ppc') ppcMatches++;
                else if (match.winner === 'ies') iesMatches++;

                match.sets.forEach(set => {
                    if (isValidSet(set.ppc, set.ies)) {
                        if (set.ppc > set.ies) ppcSetsTotal++;
                        else if (set.ies > set.ppc) iesSetsTotal++;

                        ppcPointsTotal += set.ppc;
                        iesPointsTotal += set.ies;
                    }
                });
            });

            return {
                ppc: {
                    encuentros: globalStats.ppc.encuentros + (ppcMatches > iesMatches ? 1 : 0),
                    partidos: globalStats.ppc.partidos + ppcMatches,
                    sets: ppcSetsTotal,
                    puntos: ppcPointsTotal
                },
                ies: {
                    encuentros: globalStats.ies.encuentros + (iesMatches > ppcMatches ? 1 : 0),
                    partidos: globalStats.ies.partidos + iesMatches,
                    sets: iesSetsTotal,
                    puntos: iesPointsTotal
                }
            };
        }

        // Función para actualizar display
        function updateDisplay() {
            const totals = calculateTotals();

            // Actualizar estadísticas
            const elements = {
                'ppc-encuentros': totals.ppc.encuentros,
                'ppc-partidos': totals.ppc.partidos,
                'ppc-sets': totals.ppc.sets,
                'ppc-puntos': totals.ppc.puntos,
                'ies-encuentros': totals.ies.encuentros,
                'ies-partidos': totals.ies.partidos,
                'ies-sets': totals.ies.sets,
                'ies-puntos': totals.ies.puntos,
                'global-score': `${totals.ppc.encuentros} - ${totals.ies.encuentros}`
            };

            Object.keys(elements).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = elements[id];
                }
            });

            // Actualizar escenarios
            updateScenarios(totals);
        }

        // Función para actualizar escenarios
        function updateScenarios(totals) {
            const scenariosDiv = document.getElementById('scenarios');
            if (!scenariosDiv) return;

            if (champion) {
                scenariosDiv.innerHTML = `
                    <h4>🏆 ${champion === 'PPC' ? 'Puertas Padilla Cartagena' : 'Recreativo IES La Orden'} es el CAMPEÓN!</h4>
                    <p>La final ha sido decidida según los criterios del Artículo 19.</p>
                `;
                return;
            }

            const remainingMatches = Object.values(matches).filter(m => !m.winner).length;

            if (remainingMatches === 0) {
                scenariosDiv.innerHTML = '<p>Todos los partidos completados. Verificando criterios de desempate...</p>';
                return;
            }

            scenariosDiv.innerHTML = `
                <div style="display: grid; gap: 1rem;">
                    <div style="padding: 1rem; background: #ffe6e6; border-radius: 8px;">
                        <h4>🔴 PPC necesita:</h4>
                        <ul>
                            <li>Ganar el encuentro de vuelta para forzar desempate</li>
                            <li>Diferencia actual en partidos: ${totals.ies.partidos - totals.ppc.partidos} a favor de IES</li>
                        </ul>
                    </div>
                    <div style="padding: 1rem; background: #e6ffe6; border-radius: 8px;">
                        <h4>🟢 IES necesita:</h4>
                        <ul>
                            <li>Empatar o ganar mantiene la ventaja de la ida</li>
                            <li>Ventaja actual: ${totals.ies.encuentros} - ${totals.ppc.encuentros} encuentros</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // Función para verificar campeón
        function checkForChampion() {
            if (champion) return;

            const totals = calculateTotals();

            if (totals.ppc.encuentros > totals.ies.encuentros) {
                declareChampion('PPC');
            } else if (totals.ies.encuentros > totals.ppc.encuentros) {
                declareChampion('IES');
            } else if (totals.ppc.encuentros === totals.ies.encuentros && totals.ppc.encuentros > 0) {
                if (totals.ppc.partidos > totals.ies.partidos) {
                    declareChampion('PPC');
                } else if (totals.ies.partidos > totals.ppc.partidos) {
                    declareChampion('IES');
                } else if (totals.ppc.sets > totals.ies.sets) {
                    declareChampion('PPC');
                } else if (totals.ies.sets > totals.ppc.sets) {
                    declareChampion('IES');
                } else if (totals.ppc.puntos > totals.ies.puntos) {
                    declareChampion('PPC');
                } else if (totals.ies.puntos > totals.ppc.puntos) {
                    declareChampion('IES');
                }
            }
        }

        // Función para declarar campeón
        function declareChampion(team) {
            if (champion) return;

            champion = team;
            const banner = document.getElementById('champion-banner');
            const championText = document.getElementById('champion-text');

            const teamName = team === 'PPC' ? 'Puertas Padilla Cartagena' : 'Recreativo IES La Orden';

            if (championText) championText.textContent = teamName;
            if (banner) banner.style.display = 'flex';

            // Deshabilitar inputs
            document.querySelectorAll('.match-card input').forEach(input => {
                input.disabled = true;
            });

            console.log(`🏆 ¡${teamName} es campeón!`);
        }

        // Event handlers
        function handleScoreInput(e) {
            const input = e.target;
            let value = parseInt(input.value);

            if (isNaN(value) || value < 0) value = 0;
            if (value > 30) value = 30;

            input.value = value || '';
            processMatchData();
        }

        function handleAutoComplete(e) {
            const input = e.target;
            const setContainer = input.closest('.set-input');
            const ppcInput = setContainer.querySelector('.ppc-score');
            const iesInput = setContainer.querySelector('.ies-score');

            const ppcScore = parseInt(ppcInput.value) || 0;
            const iesScore = parseInt(iesInput.value) || 0;

            if (input === ppcInput && ppcScore > 0 && ppcScore < 11 && iesScore === 0) {
                iesInput.value = 11;
            } else if (input === iesInput && iesScore > 0 && iesScore < 11 && ppcScore === 0) {
                ppcInput.value = 11;
            }

            if (ppcScore === 11 && iesScore === 11) {
                input.value = 10;
            }

            processMatchData();
        }

        // Inicialización
        function init() {
            console.log('🏸 Configurando event listeners...');
            
            // Configurar event listeners para todos los inputs existentes
            document.querySelectorAll('.match-card input').forEach(input => {
                input.addEventListener('input', handleScoreInput);
                input.addEventListener('blur', handleAutoComplete);
            });

            console.log('✅ Event listeners configurados');
            updateDisplay();
        }

        // Ejecutar cuando el DOM esté listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                console.log('📄 DOM cargado');
                
                // Ocultar loading screen después de 2 segundos
                setTimeout(() => {
                    hideLoadingScreen();
                    init();
                }, 2000);
            });
        } else {
            console.log('📄 DOM ya está listo');
            setTimeout(() => {
                hideLoadingScreen();
                init();
            }, 2000);
        }

        // Backup: forzar ocultar loading después de 5 segundos
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen && loadingScreen.style.display !== 'none') {
                console.log('⚠️ Forzando ocultación de loading screen');
                hideLoadingScreen();
                init();
            }
        }, 5000);

        console.log('🚀 Script cargado completamente');
    </script>
</body>
</html>
